@PACKAGE_INIT@

# polymerfts CMake configuration file
#
# This file is used by find_package(polymerfts) to set up the targets
# and variables needed to use polymerfts in downstream projects.

include(CMakeFindDependencyMacro)

# Required dependencies
find_dependency(OpenMP REQUIRED)

# Report what was found during the original build
set(POLYMERFTS_VERSION "@PROJECT_VERSION@")
set(POLYMERFTS_HAS_FFTW @BUILD_CPU_FFTW_LIB@)
set(POLYMERFTS_HAS_CUDA @CUDAToolkit_FOUND@)

# Optional dependencies based on build configuration
if(POLYMERFTS_HAS_FFTW)
    find_package(PkgConfig QUIET)
    if(PkgConfig_FOUND)
        pkg_check_modules(FFTW3 QUIET fftw3)
    endif()
    if(NOT FFTW3_FOUND)
        find_library(FFTW3_LIBRARIES NAMES fftw3)
        find_path(FFTW3_INCLUDE_DIRS fftw3.h)
    endif()
endif()

if(POLYMERFTS_HAS_CUDA)
    find_dependency(CUDAToolkit)
endif()

# Include the targets file
include("${CMAKE_CURRENT_LIST_DIR}/polymerfts-targets.cmake")

# Provide useful variables
get_target_property(_POLYMERFTS_INCLUDE_DIRS polymerfts::common INTERFACE_INCLUDE_DIRECTORIES)
set(POLYMERFTS_INCLUDE_DIRS ${_POLYMERFTS_INCLUDE_DIRS})

check_required_components(polymerfts)

message(STATUS "Found polymerfts ${POLYMERFTS_VERSION}")
message(STATUS "  FFTW backend: ${POLYMERFTS_HAS_FFTW}")
message(STATUS "  CUDA backend: ${POLYMERFTS_HAS_CUDA}")
